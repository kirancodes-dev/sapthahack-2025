<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Winners | SapthaHack '25</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body { 
            background: radial-gradient(circle, #003366 0%, #001a33 100%); 
            color: #fff; font-family: 'Poppins', sans-serif; min-height: 100vh; overflow-x: hidden;
        }
        
        /* CONFETTI CANVAS */
        #confetti {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 1; pointer-events: none;
        }

        .winner-container { position: relative; z-index: 2; padding-top: 50px; text-align: center; }
        
        .title-box { margin-bottom: 60px; animation: slideDown 1s ease-out; }
        .title-box h1 { font-family: 'Playfair Display', serif; font-size: 4rem; color: #FFCC00; text-shadow: 0 0 20px rgba(255, 204, 0, 0.5); }
        
        /* PODIUM LAYOUT */
        .podium {
            display: flex; justify-content: center; align-items: flex-end; gap: 30px;
            margin-top: 50px; flex-wrap: wrap;
        }
        
        .winner-card {
            background: #fff; color: #333; border-radius: 15px;
            width: 300px; padding: 20px; text-align: center;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            transition: 0.5s; opacity: 0; transform: translateY(50px);
            position: relative;
        }
        
        /* Specific Heights for Podium Effect */
        .card-1 { height: 420px; order: 2; border-top: 8px solid #FFD700; animation: popUp 1s ease-out 2s forwards; } /* Gold */
        .card-2 { height: 360px; order: 1; border-top: 8px solid #C0C0C0; animation: popUp 1s ease-out 1s forwards; } /* Silver */
        .card-3 { height: 320px; order: 3; border-top: 8px solid #CD7F32; animation: popUp 1s ease-out 0.5s forwards; } /* Bronze */

        .trophy-icon { font-size: 4rem; margin-bottom: 20px; display: block; }
        .gold { color: #FFD700; text-shadow: 0 5px 15px rgba(255, 215, 0, 0.5); }
        .silver { color: #C0C0C0; text-shadow: 0 5px 15px rgba(192, 192, 192, 0.5); }
        .bronze { color: #CD7F32; text-shadow: 0 5px 15px rgba(205, 127, 50, 0.5); }

        .team-name { font-size: 1.8rem; font-weight: 700; margin-bottom: 10px; color: #003366; }
        .score-badge { 
            background: #003366; color: #fff; padding: 5px 15px; 
            border-radius: 20px; font-weight: bold; margin-top: 15px; display: inline-block; 
        }

        @keyframes slideDown { from { transform: translateY(-100px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        @keyframes popUp { to { opacity: 1; transform: translateY(0); } }

        /* Mobile */
        @media (max-width: 768px) {
            .podium { flex-direction: column; align-items: center; }
            .winner-card { width: 90%; height: auto !important; order: unset !important; margin-bottom: 20px; }
        }
    </style>
</head>
<body>

    <canvas id="confetti"></canvas>

    <div class="container winner-container">
        
        <div class="title-box">
            <h5 class="text-uppercase text-light letter-spacing-2">SapthaHack '25</h5>
            <h1>WINNERS REVEAL</h1>
        </div>

        <div class="podium">
            
            {% if winners|length > 1 %}
            <div class="winner-card card-2">
                <i class="fas fa-trophy trophy-icon silver"></i>
                <h3 class="text-muted fw-bold">2nd Place</h3>
                <div class="team-name">{{ winners[1].name }}</div>
                <p class="text-muted">Lead: {{ winners[1].lead }}</p>
                <div class="score-badge">{{ winners[1].score }} / 100</div>
            </div>
            {% endif %}

            {% if winners|length > 0 %}
            <div class="winner-card card-1">
                <i class="fas fa-crown trophy-icon gold mb-3"></i>
                <h2 class="text-warning fw-bold">CHAMPION</h2>
                <div class="team-name" style="font-size: 2.2rem;">{{ winners[0].name }}</div>
                <p class="text-muted">Lead: {{ winners[0].lead }}</p>
                <div class="score-badge bg-warning text-dark" style="font-size: 1.2rem;">{{ winners[0].score }} / 100</div>
                <div class="mt-4"><i class="fas fa-star text-warning"></i> WINNER <i class="fas fa-star text-warning"></i></div>
            </div>
            {% endif %}

            {% if winners|length > 2 %}
            <div class="winner-card card-3">
                <i class="fas fa-medal trophy-icon bronze"></i>
                <h3 class="text-muted fw-bold">3rd Place</h3>
                <div class="team-name">{{ winners[2].name }}</div>
                <p class="text-muted">Lead: {{ winners[2].lead }}</p>
                <div class="score-badge">{{ winners[2].score }} / 100</div>
            </div>
            {% endif %}

        </div>

        <div class="mt-5 text-muted small">
            Results are final and verified by the Jury.
            <br>
            <a href="/" class="text-light mt-3 d-inline-block opacity-50">Return to Home</a>
        </div>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script>
        // Trigger Confetti Loop
        var duration = 15 * 1000;
        var animationEnd = Date.now() + duration;
        var defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };

        function random(min, max) { return Math.random() * (max - min) + min; }

        var interval = setInterval(function() {
            var timeLeft = animationEnd - Date.now();

            if (timeLeft <= 0) {
                return clearInterval(interval);
            }

            var particleCount = 50 * (timeLeft / duration);
            // Since particles fall down, start a bit higher than random
            confetti(Object.assign({}, defaults, { particleCount, origin: { x: random(0.1, 0.3), y: Math.random() - 0.2 } }));
            confetti(Object.assign({}, defaults, { particleCount, origin: { x: random(0.7, 0.9), y: Math.random() - 0.2 } }));
        }, 250);
    </script>

</body>
</html>